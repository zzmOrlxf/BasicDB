# 数据库索引

## 什么是索引？

数据库索引是用于加快数据库表访问的数据结构。占用额外的写入和存储来完成数据结构的存储。(优缺点)

#### 索引存储了指向表中某一行的指针

如果我们在索引里找到某一条记录作为索引的列的值，如何才能找到这一条记录的其它值呢？这是很简单 - 数据库索引同时存储了指向表中的相应行的指针。指针是指一块内存区域， 该内存区域记录的是对硬盘上记录的相应行的数据的引用。因此，索引中除了存储列的值，还存储着一个指向在行数据的索引。也就是说，索引中的Employee_Name这列的某个值（或者节点）可以描述为 (“Jesus”, 0x82829)， 0x82829 就是包含 “Jesus”那行数据在硬盘上的地址。如果没有这个引用，你就只能访问到一个单独的值（“Jesus”），而这样没有意义，因为你不能获取这一行记录的employee的其他值-例如地址（address）和年龄（age）。

## 索引长度

　　在为**CHAR和VARCHAR**类型的数据列定义索引时，可以把索引的长度限制为一个**给定的字符个数**（**这个数字必须小于这个字段所允许的最大字符个数**）。这么做的好处是**可以生成一个尺寸比较小、检索速度却比较快的索引文件**。在绝大多数应用里，数据库中的字符串数据大都以各种各样的名字为主，把索引的长度设置为10~15个字符已经足以把搜索范围缩小到很少的几条数据记录了。

BLOB and TEXT columns also can be indexed, `but a prefix length must be given`. Prefix lengths are given in characters for nonbinary string types and in bytes for binary string types. That is, index entries consist of the first length characters of each column value for CHAR, VARCHAR, and TEXT columns, and the first length bytes of each column value for BINARY, VARBINARY, and BLOB columns.

在为**BLOB和TEXT类型**的数据列创建索引时，必须对索引的长度做出限制；MySQL所允许的最大索引全文索引文本字段上的普通索引只能加快对出现在字段内容最前面的字符串（也就是字段内容开头的字符）进行检索操作。如果字段里存放的是由几个、甚至是多个单词构成的较大段文字，普通索引就没什么作用了。

　　这类场合正是全文索引（full-textindex）可以大显身手的地方。在生成这种类型的索引时，MySQL将把在文本中出现的所有单词创 建为一份清单，查询操作将根据这份清单去检索有关的数据记录。全文索引即可以随数据表一同创建，也可以等日后有必要时再使用下面这条命令添加：

　　ALTER TABLE tablename ADD FULLTEXT（column1，column2）有了全文索引，就可以用SELECT查询命令去检索那些包含着一个或多个给定单词的数据记录了。下面是这类查询命令的基本语法：

　　SELECT * FROM tablename

　　WHERE MATCH（column1,column2）AGAINST（‘word1','word2','word3’）

　　上面这条命令将把column1和column2字段里有word1、word2和word3的数据记录全部查询出来。





```
 说说你对索引的认识（索引的结构、对dml影响、对查询影响、为什么提高查询性能）
```

索引有B-TREE、BIT、CLUSTER等类型。ORACLE使用了一个复杂的自平衡B-tree结构;通常来说，在表上建立恰当的索引，查询时会改进查询性能。但在进行插入、删除、修改时，同时会进行索引的修改，在性能上有一定的影响。有索引且查询条件能使用索引时，数据库会先度取索引，根据索引内容和查询条件，查询出ROWID，再根据ROWID取出需要的数据。由于索引内容通常比全表内容要少很多，因此通过先读索引，能减少I/O，提高查询性能。

```
 使用索引查询一定能提高查询的性能吗？为什么
```

索引范围查询(INDEX RANGE SCAN)适用于两种情况:
基于一个范围的检索,一般查询返回结果集小于表中记录数的30%宜采用;

> 2.什么是事务？什么是锁？

事务就是绑定在一起的一个逻辑工作单元的SQL语句分组，
任意一个语句操作失败，那么整个操作就会失败，回滚到操作前的状态。
为了确保执行，要么执行要么不执行，原子性，一致性，隔离性，持久性。

> 3.什么是视图？什么是游标？

视图是一种虚拟的表，具有和屋里表相同的功能。可以对视图进行增，删，改，查操作。视图常常是一个表或多个表的行或列的子集。对视图的修改不影响基本表。它使得我们获取数据更容易，相比多表查询。

游标：是查询出的结果及作为一个单元来有效地处理。游标可以定在该单元的特定行，从结果集的当前行见多一行或多行。可以对结果集当前行做修改。一般不使用游标，但是需要逐条处理数据的时候，游标显得十分重要。

> 4.什么是触发器？

触发器是一中特殊的存储过程，主要是通过事件来触发而被执行的。它可以强化约束，来维护数据的完整性和一致性，可以跟踪数据库内的操作从而不允许未经许可的更新和变化。可以联级运算。如，某表上的触发器上包含对另一个表的数据操作，而该操作又会导致该表触发器被触发。

## 参考

索引长度： https://blog.csdn.net/qq_15037231/article/details/79125705



https://www.jianshu.com/p/bd9154df8bf0 用explain进行优化的过程



记得看：

[MySql数据库之索引优化](http://luckylau.tech/2018/05/01/MySql%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96/)

[MySQL索引原理以及查询优化](https://www.cnblogs.com/bypp/p/7755307.html)

 Mysql聚集索引和非聚集索引(堆组织表和索引组织表)

https://blog.csdn.net/ochangwen/article/details/53997366